{# navbar.html.twig #}
<nav class="navbar">
    <div class="navbar-container">
        <a href="{{ path('app_home') }}" class="navbar-logo">TalkSphere</a>
        
        <div class="navbar-search">
            <form action="{{ path('app_search') }}" method="get">
                <input type="text" class="search-input" name="q" placeholder="Search topics..." aria-label="Search">
                <button type="submit" class="search-btn">Search</button>
            </form>
        </div>

        <div class="navbar-links">
            {% if is_granted('ROLE_USER') %}
                <a href="{{ path('app_profile') }}" class="navbar-user">
                    {{ app.user.username }}
                </a>
                <a href="{{ path('app_create_discussion') }}" class="create-discussion-btn" 
                {% if theme is defined %}data-theme="{{ theme.id }}"{% endif %}
                >+</a>                
                <div class="profile-dropdown">
                    <img 
                        src="{{ app.user.getProfilePicture() }}"
                        alt="Profile"
                        class="navbar-profile-img"
                        onerror="this.src='{{ asset('images/default-profile.png') }}';"
                        onclick="toggleDropdown()"
                    />
                    <div class="dropdown-menu" id="profileDropdown">
                        <a href="{{ path('app_profile') }}">Profile</a>
                        <a href="{{ path('app_logout') }}">Log Out</a>
                    </div>
                </div>
            {% else %}
                <a href="{{ path('app_login') }}" class="navbar-link">Login</a>
                <a href="{{ path('app_register') }}" class="navbar-link">Register</a>
            {% endif %}
             <link rel="stylesheet" href="{{ asset('styles/navbar.css') }}">
            <script src="{{ asset('js/navbar.js') }}"></script>
        </div>
    </div>
</nav>